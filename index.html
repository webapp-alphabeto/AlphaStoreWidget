<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alphabeto Store Locator - Encontre a loja mais pr√≥xima</title>
    <meta name="description" content="Encontre a loja Alphabeto mais pr√≥xima de voc√™. Mais de 50 lojas em todo Brasil.">
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='80' font-size='80'>üë∂</text></svg>">
    
    <!-- React e React DOM via CDN -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        * {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        
        /* Scrollbar customizada */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #FF6B35;
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #F7931E;
        }
        
        /* Bot√£o flutuante */
        .alphabeto-widget-button {
            position: fixed;
            bottom: 24px;
            right: 24px;
            z-index: 999999;
            width: 72px;
            height: 72px;
            border-radius: 50%;
            box-shadow: 0 8px 24px rgba(255, 107, 53, 0.25);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            background: linear-gradient(135deg, #FF6B35 0%, #F7931E 100%);
            border: none;
            cursor: pointer;
            overflow: hidden;
        }
        
        .alphabeto-widget-button:hover {
            transform: scale(1.1) translateY(-2px);
            box-shadow: 0 12px 32px rgba(255, 107, 53, 0.35);
        }
        
        .alphabeto-widget-button:active {
            transform: scale(1.05);
        }
        
        /* Modal responsivo */
        .alphabeto-widget-modal {
            position: fixed;
            right: 0;
            top: 0;
            height: 100%;
            width: 100%;
            max-width: 420px;
            background: #FAFAFA;
            box-shadow: -4px 0 24px rgba(0, 0, 0, 0.12);
            z-index: 999999;
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }
        
        .alphabeto-widget-modal.closed {
            transform: translateX(100%);
        }
        
        /* Overlay */
        .alphabeto-widget-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.6);
            z-index: 999998;
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
            backdrop-filter: blur(4px);
        }
        
        .alphabeto-widget-overlay.show {
            opacity: 1;
            pointer-events: auto;
        }
        
        /* Anima√ß√µes */
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        @keyframes pulse {
            0%, 100% { 
                opacity: 1;
                transform: scale(1);
            }
            50% { 
                opacity: 0.8;
                transform: scale(1.1);
            }
        }
        
        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* Spinner */
        .spinner {
            border: 3px solid #FFE5DB;
            border-top: 3px solid #FF6B35;
            border-radius: 50%;
            width: 48px;
            height: 48px;
            animation: spin 1s linear infinite;
        }
        
        /* Cards de loja */
        .store-card {
            border: 2px solid #F3F4F6;
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 16px;
            cursor: pointer;
            transition: all 0.2s ease;
            background: white;
            position: relative;
            overflow: hidden;
        }
        
        .store-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.08);
            border-color: #FFE5DB;
        }
        
        .store-card.featured {
            border-color: #FF6B35;
            background: linear-gradient(135deg, #FFF7F3 0%, #FFEDE6 100%);
            box-shadow: 0 4px 16px rgba(255, 107, 53, 0.1);
        }
        
        /* Bot√µes */
        .btn-primary {
            background: linear-gradient(135deg, #FF6B35 0%, #F7931E 100%);
            color: white;
            padding: 14px 24px;
            border-radius: 12px;
            font-weight: 600;
            transition: all 0.2s ease;
            border: none;
            cursor: pointer;
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            width: 100%;
        }
        
        .btn-primary:hover {
            transform: translateY(-1px);
            box-shadow: 0 8px 20px rgba(255, 107, 53, 0.25);
        }
        
        .btn-primary:active {
            transform: translateY(0);
        }
        
        .btn-secondary {
            background: white;
            color: #FF6B35;
            border: 2px solid #FF6B35;
            padding: 12px 24px;
            border-radius: 12px;
            font-weight: 600;
            transition: all 0.2s ease;
            cursor: pointer;
            font-size: 16px;
            width: 100%;
        }
        
        .btn-secondary:hover {
            background: #FFF7F3;
            transform: translateY(-1px);
        }
        
        .btn-sac {
            background: linear-gradient(135deg, #8B5CF6 0%, #EC4899 100%);
            color: white;
            padding: 14px 24px;
            border-radius: 12px;
            font-weight: 600;
            transition: all 0.2s ease;
            border: none;
            cursor: pointer;
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            width: 100%;
        }
        
        .btn-sac:hover {
            transform: translateY(-1px);
            box-shadow: 0 8px 20px rgba(139, 92, 246, 0.25);
        }
        
        /* Input */
        .search-input {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid #E5E7EB;
            border-radius: 12px;
            font-size: 16px;
            transition: all 0.2s ease;
            background: white;
        }
        
        .search-input:focus {
            outline: none;
            border-color: #FF6B35;
            box-shadow: 0 0 0 3px rgba(255, 107, 53, 0.1);
        }
        
        /* Responsividade */
        @media (max-width: 640px) {
            .alphabeto-widget-modal {
                max-width: 100%;
            }
            
            .alphabeto-widget-button {
                width: 64px;
                height: 64px;
                bottom: 20px;
                right: 20px;
            }
        }
        
        @media (max-width: 375px) {
            .alphabeto-widget-modal {
                font-size: 14px;
            }
            
            .btn-primary, .btn-secondary, .btn-sac {
                font-size: 14px;
                padding: 12px 20px;
            }
        }
        
        /* Badge animado */
        .pulse-badge {
            position: absolute;
            top: -4px;
            right: -4px;
            width: 14px;
            height: 14px;
            background: #22c55e;
            border: 2px solid white;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }
        
        /* Divider */
        .divider {
            height: 1px;
            background: linear-gradient(to right, transparent, #E5E7EB, transparent);
            margin: 24px 0;
        }
        
        /* Transi√ß√µes suaves */
        .fade-enter {
            animation: slideUp 0.3s ease-out;
        }
    </style>
</head>
<body>
    <!-- Container do Widget -->
    <div id="alphabeto-store-locator-widget"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Componente do Widget
        const AlphabetoStoreLocatorWidget = () => {
            const [isOpen, setIsOpen] = useState(false);
            const [currentView, setCurrentView] = useState('menu'); // menu, loading, results
            const [addressInput, setAddressInput] = useState('');
            const [nearbyStores, setNearbyStores] = useState([]);
            const [allStores, setAllStores] = useState([]);
            const [sacInfo, setSacInfo] = useState(null);
            const [isLoading, setIsLoading] = useState(false);
            const [storesLoaded, setStoresLoaded] = useState(false);

            // Carregar lojas do arquivo JSON
            useEffect(() => {
                fetch('stores.json')
                    .then(response => response.json())
                    .then(data => {
                        setAllStores(data.stores || []);
                        setSacInfo(data.sac || null);
                        setStoresLoaded(true);
                    })
                    .catch(error => {
                        console.error('Erro ao carregar lojas:', error);
                        // Fallback para algumas lojas
                        setAllStores([
                            { id: 37, name: "Alphabeto Alian√ßa Shopping", address: "Pra√ßa Doutor Augusto Gl√≥ria, 327 - Centro", city: "S√£o Jo√£o Nepomuceno", state: "MG", cep: "36680-000", whatsapp: "5532991295904", lat: -21.5388, lng: -43.0089, hours: "Seg-S√°b: 9h-18h | Dom: 9h-14h" },
                            { id: 31, name: "Alphabeto Barra Shopping", address: "Avenida das Am√©ricas, 4666 - Barra da Tijuca", city: "Rio de Janeiro", state: "RJ", cep: "22640-102", whatsapp: "5521996628735", lat: -23.0049, lng: -43.3211, hours: "Seg-S√°b: 10h-22h | Dom: 13h-21h" },
                            { id: 6, name: "Alphabeto Morumbi Shopping", address: "Avenida Roque Petroni J√∫nior, 1089 - Vila Gertrudes", city: "S√£o Paulo", state: "SP", cep: "04707-900", whatsapp: "5511930402110", lat: -23.6224, lng: -46.6993, hours: "Seg-S√°b: 10h-22h | Dom: 14h-20h" }
                        ]);
                        setSacInfo({ name: "Fadinhas do SAC", whatsapp: "5521999999999", message: "Ol√°! Gostaria de falar com as Fadinhas do SAC da Alphabeto! üßö‚Äç‚ôÄÔ∏è" });
                        setStoresLoaded(true);
                    });
            }, []);

            // Calcular dist√¢ncia entre duas coordenadas
            const calculateDistance = (lat1, lng1, lat2, lng2) => {
                const R = 6371;
                const dLat = (lat2 - lat1) * Math.PI / 180;
                const dLng = (lng2 - lng1) * Math.PI / 180;
                const a = 
                    Math.sin(dLat/2) * Math.sin(dLat/2) +
                    Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) * 
                    Math.sin(dLng/2) * Math.sin(dLng/2);
                const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
                return R * c;
            };

            // Formatar CEP
            const formatCEP = (cep) => {
                return cep.replace(/\D/g, '');
            };

            // Verificar se √© CEP
            const isCEP = (value) => {
                const cleaned = formatCEP(value);
                return cleaned.length === 8 && /^\d{8}$/.test(cleaned);
            };

            // Usar geolocaliza√ß√£o
            const useCurrentLocation = async () => {
                setIsLoading(true);
                setCurrentView('loading');
                
                try {
                    const position = await new Promise((resolve, reject) => {
                        if (!navigator.geolocation) {
                            reject(new Error("Geolocaliza√ß√£o n√£o suportada"));
                            return;
                        }
                        
                        navigator.geolocation.getCurrentPosition(resolve, reject, {
                            enableHighAccuracy: true,
                            timeout: 10000,
                            maximumAge: 0
                        });
                    });

                    const { latitude, longitude } = position.coords;
                    const storesWithDistance = allStores.map(store => ({
                        ...store,
                        distance: calculateDistance(latitude, longitude, store.lat, store.lng)
                    })).sort((a, b) => a.distance - b.distance);
                    
                    setNearbyStores(storesWithDistance);
                    setCurrentView('results');
                    
                } catch (error) {
                    let message = "N√£o foi poss√≠vel obter sua localiza√ß√£o.";
                    if (error.code === 1) {
                        message = "Permiss√£o de localiza√ß√£o negada. Por favor, digite seu endere√ßo.";
                    } else if (error.code === 2) {
                        message = "Localiza√ß√£o indispon√≠vel. Verifique se o GPS est√° ativado.";
                    } else if (error.code === 3) {
                        message = "Tempo esgotado. Tente novamente ou digite seu endere√ßo.";
                    }
                    alert(message);
                    setCurrentView('menu');
                }
                
                setIsLoading(false);
            };

            // Buscar endere√ßo via ViaCEP
            const searchViaCEP = async (cep) => {
                try {
                    const response = await fetch(`https://viacep.com.br/ws/${cep}/json/`);
                    const data = await response.json();
                    
                    if (!data.erro) {
                        return `${data.logradouro}, ${data.localidade}, ${data.uf}, Brasil`;
                    }
                    return null;
                } catch (error) {
                    return null;
                }
            };

            // Geocodificar endere√ßo
            const geocodeAddress = async (address) => {
                const searchAddress = `${address}, Brasil`;
                const response = await fetch(
                    `https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(searchAddress)}&countrycodes=br&limit=1`
                );
                
                const data = await response.json();
                
                if (data && data[0]) {
                    return {
                        lat: parseFloat(data[0].lat),
                        lng: parseFloat(data[0].lon)
                    };
                }
                
                throw new Error('Endere√ßo n√£o encontrado');
            };

            // Buscar lojas por endere√ßo
            const findNearbyStores = async () => {
                if (!addressInput.trim()) {
                    alert("Por favor, digite seu endere√ßo, cidade ou CEP.");
                    return;
                }

                setIsLoading(true);
                setCurrentView('loading');
                
                try {
                    let searchAddress = addressInput;
                    
                    if (isCEP(addressInput)) {
                        const cepFormatted = formatCEP(addressInput);
                        const viacepAddress = await searchViaCEP(cepFormatted);
                        if (viacepAddress) {
                            searchAddress = viacepAddress;
                        } else {
                            searchAddress = addressInput + ', Brasil';
                        }
                    }
                    
                    const coordinates = await geocodeAddress(searchAddress);
                    
                    const storesWithDistance = allStores.map(store => ({
                        ...store,
                        distance: calculateDistance(coordinates.lat, coordinates.lng, store.lat, store.lng)
                    })).sort((a, b) => a.distance - b.distance);
                    
                    setNearbyStores(storesWithDistance);
                    setCurrentView('results');
                } catch (error) {
                    alert("N√£o foi poss√≠vel encontrar o endere√ßo. Tente ser mais espec√≠fico.");
                    setCurrentView('menu');
                }
                
                setIsLoading(false);
            };

            // Abrir WhatsApp
            const openWhatsApp = (store) => {
                const now = new Date();
                const hour = now.getHours();
                
                let greeting = "Ol√°!";
                if (hour < 12) greeting = "Bom dia!";
                else if (hour < 18) greeting = "Boa tarde!";
                else greeting = "Boa noite!";
                
                const message = `${greeting} üë∂\n\nGostaria de mais informa√ß√µes sobre a ${store.name}!\n\nEndere√ßo: ${store.address}`;
                const whatsappUrl = `https://wa.me/${store.whatsapp}?text=${encodeURIComponent(message)}`;
                
                window.open(whatsappUrl, '_blank');
            };

            // Abrir WhatsApp SAC
            const openSACWhatsApp = () => {
                if (!sacInfo) return;
                
                const whatsappUrl = `https://wa.me/${sacInfo.whatsapp}?text=${encodeURIComponent(sacInfo.message)}`;
                window.open(whatsappUrl, '_blank');
            };

            // Fechar modal ao clicar fora
            useEffect(() => {
                const handleClickOutside = (event) => {
                    if (isOpen && !event.target.closest('.alphabeto-widget-modal') && !event.target.closest('.alphabeto-widget-button')) {
                        setIsOpen(false);
                    }
                };

                document.addEventListener('mousedown', handleClickOutside);
                return () => document.removeEventListener('mousedown', handleClickOutside);
            }, [isOpen]);

            // Reset ao fechar
            useEffect(() => {
                if (!isOpen) {
                    setTimeout(() => {
                        setCurrentView('menu');
                        setAddressInput('');
                        setNearbyStores([]);
                    }, 300);
                }
            }, [isOpen]);

            return (
                <>
                    {/* Bot√£o Flutuante */}
                    <button
                        onClick={() => setIsOpen(true)}
                        className="alphabeto-widget-button"
                        aria-label="Encontrar loja Alphabeto"
                    >
                        <svg width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="white" strokeWidth="2">
                            <path d="M3 21h18M3 7v1a3 3 0 0 0 6 0V7m0 1a3 3 0 0 0 6 0V7m0 1a3 3 0 0 0 6 0V7H3l2-4h14l2 4M5 21V10.85M19 21V10.85"/>
                        </svg>
                        <div className="pulse-badge"></div>
                    </button>

                    {/* Modal */}
                    <div className={`alphabeto-widget-modal ${!isOpen ? 'closed' : ''}`}>
                        {/* Header */}
                        <div style={{
                            background: 'linear-gradient(135deg, #FF6B35 0%, #F7931E 100%)',
                            color: 'white',
                            padding: '20px 24px',
                            display: 'flex',
                            alignItems: 'center',
                            justifyContent: 'space-between',
                            boxShadow: '0 2px 8px rgba(0, 0, 0, 0.1)'
                        }}>
                            <div style={{ display: 'flex', alignItems: 'center', gap: '16px' }}>
                                <img 
                                    src="https://www.alphabeto.com/live/invoke/website/loaders/image.ts?src=https%3A%2F%2Fdeco-sites-assets.s3.sa-east-1.amazonaws.com%2Falphabeto%2Fe30a75c7-a480-4ecb-828e-e76c39805c71%2Fsvgviewer-output-%2821%29.svg&fit=cover&width=120&height=36"
                                    alt="Alphabeto"
                                    style={{ 
                                        height: '32px',
                                        filter: 'brightness(0) invert(1)'
                                    }}
                                />
                                <span style={{ fontSize: '18px', fontWeight: '600', opacity: 0.9 }}>Lojas</span>
                            </div>
                            <button
                                onClick={() => setIsOpen(false)}
                                style={{
                                    background: 'rgba(255, 255, 255, 0.2)',
                                    border: 'none',
                                    color: 'white',
                                    cursor: 'pointer',
                                    width: '36px',
                                    height: '36px',
                                    borderRadius: '8px',
                                    display: 'flex',
                                    alignItems: 'center',
                                    justifyContent: 'center',
                                    fontSize: '20px',
                                    transition: 'all 0.2s ease'
                                }}
                                onMouseEnter={(e) => e.currentTarget.style.background = 'rgba(255, 255, 255, 0.3)'}
                                onMouseLeave={(e) => e.currentTarget.style.background = 'rgba(255, 255, 255, 0.2)'}
                            >
                                ‚úï
                            </button>
                        </div>

                        {/* Conte√∫do */}
                        <div style={{ 
                            flex: 1,
                            overflowY: 'auto', 
                            padding: '24px',
                            background: '#FAFAFA'
                        }}>
                            {!storesLoaded ? (
                                <div style={{ textAlign: 'center', padding: '60px 20px' }} className="fade-enter">
                                    <div className="spinner" style={{ margin: '0 auto' }}></div>
                                    <p style={{ marginTop: '24px', color: '#6B7280', fontSize: '16px' }}>
                                        Carregando lojas...
                                    </p>
                                </div>
                            ) : currentView === 'loading' ? (
                                <div style={{ textAlign: 'center', padding: '60px 20px' }} className="fade-enter">
                                    <div className="spinner" style={{ margin: '0 auto' }}></div>
                                    <p style={{ marginTop: '24px', color: '#6B7280', fontSize: '16px' }}>
                                        Buscando lojas pr√≥ximas...
                                    </p>
                                </div>
                            ) : currentView === 'menu' ? (
                                <div className="fade-enter">
                                    {/* T√≠tulo */}
                                    <div style={{ marginBottom: '32px', textAlign: 'center' }}>
                                        <h3 style={{ 
                                            fontSize: '24px', 
                                            fontWeight: '700', 
                                            color: '#1F2937',
                                            marginBottom: '8px'
                                        }}>
                                            Encontre a loja mais pr√≥xima
                                        </h3>
                                        <p style={{ color: '#6B7280', fontSize: '14px' }}>
                                            Mais de {allStores.length} lojas em todo Brasil
                                        </p>
                                    </div>
                                    
                                    {/* Bot√£o de geolocaliza√ß√£o */}
                                    <button
                                        onClick={useCurrentLocation}
                                        className="btn-primary"
                                        style={{ marginBottom: '16px' }}
                                    >
                                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                                            <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7z"/>
                                            <circle cx="12" cy="9" r="3"/>
                                        </svg>
                                        Usar minha localiza√ß√£o atual
                                    </button>

                                    <div style={{ 
                                        display: 'flex', 
                                        alignItems: 'center', 
                                        gap: '12px',
                                        margin: '20px 0',
                                        color: '#9CA3AF'
                                    }}>
                                        <div style={{ flex: 1, height: '1px', background: '#E5E7EB' }}></div>
                                        <span style={{ fontSize: '14px', fontWeight: '500' }}>ou</span>
                                        <div style={{ flex: 1, height: '1px', background: '#E5E7EB' }}></div>
                                    </div>
                                    
                                    {/* Campo de busca */}
                                    <div style={{ marginBottom: '32px' }}>
                                        <input
                                            type="text"
                                            placeholder="Digite sua cidade, CEP ou endere√ßo..."
                                            value={addressInput}
                                            onChange={(e) => setAddressInput(e.target.value)}
                                            onKeyPress={(e) => e.key === 'Enter' && findNearbyStores()}
                                            className="search-input"
                                            style={{ marginBottom: '12px' }}
                                        />
                                        
                                        <button
                                            onClick={findNearbyStores}
                                            disabled={isLoading}
                                            className="btn-secondary"
                                        >
                                            üîç Buscar lojas
                                        </button>
                                    </div>

                                    {/* Bot√£o das Fadinhas */}
                                    {sacInfo && (
                                        <>
                                            <div className="divider"></div>
                                            <button
                                                onClick={openSACWhatsApp}
                                                className="btn-sac"
                                            >
                                                <span style={{ fontSize: '20px' }}>üßö‚Äç‚ôÄÔ∏è</span>
                                                Falar com as Fadinhas do SAC
                                            </button>
                                            <div className="divider"></div>
                                        </>
                                    )}

                                    {/* Lista de todas as lojas */}
                                    <div>
                                        <h4 style={{ 
                                            fontSize: '18px', 
                                            fontWeight: '600', 
                                            marginBottom: '20px',
                                            color: '#374151'
                                        }}>
                                            Nossas lojas
                                        </h4>
                                        {allStores.slice(0, 10).map((store) => (
                                            <div
                                                key={store.id}
                                                onClick={() => openWhatsApp(store)}
                                                className="store-card"
                                            >
                                                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'start' }}>
                                                    <div style={{ flex: 1 }}>
                                                        <h5 style={{ 
                                                            fontWeight: '600', 
                                                            marginBottom: '6px',
                                                            color: '#1F2937',
                                                            fontSize: '16px'
                                                        }}>
                                                            {store.name}
                                                        </h5>
                                                        <p style={{ 
                                                            fontSize: '14px', 
                                                            color: '#6B7280',
                                                            marginBottom: '4px'
                                                        }}>
                                                            üìç {store.city}, {store.state}
                                                        </p>
                                                        <p style={{ 
                                                            fontSize: '13px', 
                                                            color: '#9CA3AF'
                                                        }}>
                                                            {store.address}
                                                        </p>
                                                        {store.cep && (
                                                            <p style={{ 
                                                                fontSize: '12px', 
                                                                color: '#9CA3AF', 
                                                                marginTop: '4px' 
                                                            }}>
                                                                CEP: {store.cep}
                                                            </p>
                                                        )}
                                                    </div>
                                                    <div style={{ 
                                                        color: '#22C55E',
                                                        fontSize: '24px'
                                                    }}>
                                                        üí¨
                                                    </div>
                                                </div>
                                            </div>
                                        ))}
                                        
                                        {allStores.length > 10 && (
                                            <p style={{ 
                                                textAlign: 'center', 
                                                color: '#9CA3AF', 
                                                fontSize: '14px',
                                                marginTop: '20px'
                                            }}>
                                                Mostrando 10 de {allStores.length} lojas
                                            </p>
                                        )}
                                    </div>
                                </div>
                            ) : (
                                <div className="fade-enter">
                                    {/* Resultados */}
                                    <button
                                        onClick={() => setCurrentView('menu')}
                                        style={{
                                            color: '#FF6B35',
                                            fontWeight: '600',
                                            marginBottom: '24px',
                                            background: 'none',
                                            border: 'none',
                                            cursor: 'pointer',
                                            display: 'flex',
                                            alignItems: 'center',
                                            gap: '8px',
                                            fontSize: '16px',
                                            padding: '0'
                                        }}
                                    >
                                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                                            <path d="M19 12H5M12 19l-7-7 7-7"/>
                                        </svg>
                                        Voltar
                                    </button>
                                    
                                    <div style={{ marginBottom: '24px' }}>
                                        <h3 style={{ 
                                            fontSize: '24px', 
                                            fontWeight: '700', 
                                            marginBottom: '8px',
                                            color: '#1F2937'
                                        }}>
                                            Lojas encontradas
                                        </h3>
                                        <p style={{ color: '#6B7280', fontSize: '14px' }}>
                                            {nearbyStores.length} {nearbyStores.length === 1 ? 'loja encontrada' : 'lojas encontradas'}, ordenadas por proximidade
                                        </p>
                                    </div>
                                    
                                    {nearbyStores.length === 0 ? (
                                        <div style={{ 
                                            textAlign: 'center', 
                                            padding: '60px 20px',
                                            background: 'white',
                                            borderRadius: '16px',
                                            border: '2px dashed #E5E7EB'
                                        }}>
                                            <div style={{ fontSize: '64px', marginBottom: '20px' }}>üîç</div>
                                            <h3 style={{ 
                                                fontSize: '20px', 
                                                fontWeight: '600', 
                                                marginBottom: '12px',
                                                color: '#374151'
                                            }}>
                                                Nenhuma loja encontrada
                                            </h3>
                                            <p style={{ color: '#6B7280', fontSize: '14px' }}>
                                                Tente buscar por outra localiza√ß√£o ou entre em contato com o SAC
                                            </p>
                                        </div>
                                    ) : (
                                        nearbyStores.map((store, index) => (
                                            <div
                                                key={store.id}
                                                onClick={() => openWhatsApp(store)}
                                                className={`store-card ${index === 0 && store.distance < 50 ? 'featured' : ''}`}
                                            >
                                                {index === 0 && store.distance < 50 && (
                                                    <span style={{
                                                        display: 'inline-block',
                                                        background: '#FF6B35',
                                                        color: 'white',
                                                        fontSize: '12px',
                                                        padding: '4px 12px',
                                                        borderRadius: '20px',
                                                        marginBottom: '12px',
                                                        fontWeight: '600'
                                                    }}>
                                                        ‚≠ê Mais pr√≥xima
                                                    </span>
                                                )}
                                                
                                                <div style={{ 
                                                    position: 'absolute',
                                                    top: '20px',
                                                    right: '20px',
                                                    background: '#FFF7F3',
                                                    padding: '6px 12px',
                                                    borderRadius: '8px',
                                                    fontWeight: '600',
                                                    color: '#FF6B35',
                                                    fontSize: '14px'
                                                }}>
                                                    {store.distance.toFixed(1)} km
                                                </div>
                                                
                                                <h5 style={{ 
                                                    fontWeight: '600', 
                                                    marginBottom: '8px',
                                                    color: '#1F2937',
                                                    fontSize: '16px',
                                                    paddingRight: '80px'
                                                }}>
                                                    {store.name}
                                                </h5>
                                                <p style={{ 
                                                    fontSize: '14px', 
                                                    color: '#6B7280',
                                                    marginBottom: '6px'
                                                }}>
                                                    üìç {store.city}, {store.state}
                                                </p>
                                                <p style={{ 
                                                    fontSize: '13px', 
                                                    color: '#9CA3AF',
                                                    marginBottom: '8px'
                                                }}>
                                                    {store.address}
                                                </p>
                                                {store.cep && (
                                                    <p style={{ 
                                                        fontSize: '12px', 
                                                        color: '#9CA3AF',
                                                        marginBottom: '8px'
                                                    }}>
                                                        CEP: {store.cep}
                                                    </p>
                                                )}
                                                {store.hours && (
                                                    <p style={{ 
                                                        fontSize: '13px', 
                                                        color: '#6B7280',
                                                        marginBottom: '12px'
                                                    }}>
                                                        ‚è∞ {store.hours.split('|')[0]}
                                                    </p>
                                                )}
                                                <div style={{ 
                                                    display: 'flex',
                                                    alignItems: 'center',
                                                    gap: '8px',
                                                    color: '#22C55E',
                                                    fontSize: '14px',
                                                    fontWeight: '600'
                                                }}>
                                                    üí¨ Conversar no WhatsApp
                                                </div>
                                            </div>
                                        ))
                                    )}
                                </div>
                            )}
                        </div>

                        {/* Footer */}
                        <div style={{
                            padding: '16px 24px',
                            background: 'white',
                            borderTop: '1px solid #E5E7EB',
                            textAlign: 'center'
                        }}>
                            <p style={{ 
                                fontSize: '12px', 
                                color: '#9CA3AF'
                            }}>
                                ¬© 2025 Alphabeto - Vestindo crian√ßa como crian√ßa
                            </p>
                        </div>
                    </div>

                    {/* Overlay para mobile */}
                    <div 
                        className={`alphabeto-widget-overlay ${isOpen ? 'show' : ''}`}
                        onClick={() => setIsOpen(false)}
                    ></div>
                </>
            );
        };

        // Renderizar o widget
        ReactDOM.render(<AlphabetoStoreLocatorWidget />, document.getElementById('alphabeto-store-locator-widget'));
    </script>

    <!-- Babel Transpiler -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</body>
</html>